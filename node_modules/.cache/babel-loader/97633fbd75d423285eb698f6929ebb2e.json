{"ast":null,"code":"var _jsxFileName = \"D:\\\\University\\\\interactive-comments-section-master\\\\src\\\\App.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport \"./Components/Styles/App.scss\";\n/* Добавление комментария */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AddComment = _ref => {\n  _s();\n\n  let {\n    buttonValue,\n    addComments,\n    replyingTo\n  } = _ref;\n  const replyingToUser = replyingTo ? `@${replyingTo}, ` : \"\";\n  const [comment, setComment] = useState(replyingToUser);\n\n  const clickHandler = () => {\n    if (comment === \"\" || comment === \" \") return;\n    const newComment = {\n      id: Math.floor(Math.random() * 100) + 5,\n      content: replyingToUser + comment.replace(replyingToUser, \"\"),\n      createdAt: new Date(),\n      score: 0,\n      username: \"juliusomo\",\n      currentUser: true,\n      replies: []\n    };\n    addComments(newComment);\n    setComment(\"\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"add-comment\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-pic\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      className: \"comment-input\",\n      placeholder: \"Add a comment\",\n      value: comment,\n      onChange: e => {\n        setComment(e.target.value);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"send-btn-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-pic\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"add-btn\",\n        onClick: clickHandler,\n        children: buttonValue\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this);\n};\n/* Добавление комментария */\n\n/* Блок ответа */\n\n\n_s(AddComment, \"Mr9KNzV1B56l84fQ8zthtOGT7Yc=\");\n\n_c = AddComment;\n\nconst ReplyContainer = _ref2 => {\n  let {\n    commentData,\n    updateScore,\n    addReply,\n    editComment,\n    deleteComment,\n    setDeleteModalState\n  } = _ref2;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"reply-container\",\n    children: commentData.map(data => /*#__PURE__*/_jsxDEV(Reply, {\n      commentData: data,\n      updateScore: updateScore,\n      addNewReply: addReply,\n      editComment: editComment,\n      deleteComment: deleteComment,\n      setDeleteModalState: setDeleteModalState\n    }, data.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n/* Блок ответа */\n\n/* Удаление модалки */\n\n\n_c2 = ReplyContainer;\n\nconst DeleteModal = _ref3 => {\n  let {\n    setDeleting,\n    deleteComment,\n    setDeleteModalState\n  } = _ref3;\n\n  const cancelDelete = () => {\n    setDeleting(false);\n    setDeleteModalState(false);\n  };\n\n  const deleteBtnClick = () => {\n    deleteComment();\n    setDeleteModalState(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"delete-confirmation-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"delete-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"title\",\n        children: \"Delete comment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"confirmation-message\",\n        children: \"Are you sure you want to delete this comment? This will remove the comment and can't be undone.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btn-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"cancel-btn\",\n          onClick: cancelDelete,\n          children: \"No, cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"delete-btn\",\n          onClick: deleteBtnClick,\n          children: \"Yes, delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n};\n/* Удаление модалки */\n\n/* Ответы */\n\n\n_c3 = DeleteModal;\n\nconst Reply = _ref4 => {\n  _s2();\n\n  let {\n    commentData,\n    updateScore,\n    addNewReply,\n    editComment,\n    deleteComment,\n    setDeleteModalState\n  } = _ref4;\n  const [replying, setReplying] = useState(false);\n  const [editing, setEditing] = useState(false);\n  const [content, setContent] = useState(commentData.content);\n  const [deleting, setDeleting] = useState(false); // adding reply\n\n  const addReply = newReply => {\n    addNewReply(newReply);\n    setReplying(false);\n  };\n\n  const commentContent = () => {\n    const text = commentData.content.trim().split(\" \");\n    const firstWord = text.shift().split(\",\");\n    return !editing ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comment-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"replyingTo\",\n        children: firstWord\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), text.join(\" \")]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(\"textarea\", {\n      className: \"content-edit-box\",\n      value: content,\n      onChange: e => {\n        setContent(e.target.value);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this);\n  };\n\n  const updateComment = () => {\n    editComment(content, commentData.id, \"reply\");\n    setEditing(false);\n  }; // delete comment\n\n\n  const deleteReply = () => {\n    deleteComment(commentData.id, \"reply\");\n    setDeleting(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `comment-container ${commentData.replies[0] !== undefined ? \"gap\" : \"\"}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comment\",\n      children: [/*#__PURE__*/_jsxDEV(CommentVotes, {\n        updateScore: updateScore,\n        commentData: commentData,\n        type: \"reply\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"comment--body\",\n        children: [/*#__PURE__*/_jsxDEV(CommentHeader, {\n          commentData: commentData,\n          setReplying: setReplying,\n          setDeleting: setDeleting,\n          setDeleteModalState: setDeleteModalState,\n          setEditing: setEditing\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this), commentContent(), editing && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"update-btn\",\n          onClick: updateComment,\n          children: \"update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CommentFooter, {\n        updateScore: updateScore,\n        commentData: commentData,\n        setReplying: setReplying,\n        setDeleting: setDeleting,\n        setDeleteModalState: setDeleteModalState,\n        setEditing: setEditing,\n        type: \"reply\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this), replying && /*#__PURE__*/_jsxDEV(AddComment, {\n      buttonValue: \"reply\",\n      addComments: addReply,\n      replyingTo: commentData.username\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }, this), commentData.replies.map(reply => /*#__PURE__*/_jsxDEV(Reply, {\n      commentData: reply,\n      addReply: addReply\n    }, reply.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 9\n    }, this)), deleting && /*#__PURE__*/_jsxDEV(DeleteModal, {\n      setDeleting: setDeleting,\n      deleteComment: deleteReply,\n      setDeleteModalState: setDeleteModalState\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 5\n  }, this);\n};\n/* Ответы */\n\n\n_s2(Reply, \"9mZrKds04+d9MZiitrBvhWuSblU=\");\n\n_c4 = Reply;\n\nconst Comment = _ref5 => {\n  _s3();\n\n  let {\n    commentData,\n    updateScore,\n    updateReplies,\n    editComment,\n    commentDelete,\n    setDeleteModalState\n  } = _ref5;\n  const [replying, setReplying] = useState(false);\n  const [editing, setEditing] = useState(false);\n  const [content, setContent] = useState(commentData.content);\n  const [deleting, setDeleting] = useState(false);\n\n  const addReply = newReply => {\n    const replies = [...commentData.replies, newReply];\n    updateReplies(replies, commentData.id);\n    setReplying(false);\n  };\n\n  const updateComment = () => {\n    editComment(content, commentData.id, \"comment\");\n    setEditing(false);\n  };\n\n  const deleteComment = (id, type) => {\n    const finalType = type !== undefined ? type : \"comment\";\n    const finalId = id !== undefined ? id : commentData.id;\n    commentDelete(finalId, finalType, commentData.id);\n    setDeleting(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `comment-container ${commentData.replies[0] !== undefined ? \"reply-container-gap\" : \"\"}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comment\",\n      children: [/*#__PURE__*/_jsxDEV(CommentVotes, {\n        updateScore: updateScore,\n        commentData: commentData,\n        type: \"comment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"comment--body\",\n        children: [/*#__PURE__*/_jsxDEV(CommentHeader, {\n          commentData: commentData,\n          replying: replying,\n          setReplying: setReplying,\n          setDeleting: setDeleting,\n          setDeleteModalState: setDeleteModalState,\n          setEditing: setEditing\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this), !editing ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"comment-content\",\n          children: commentData.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"content-edit-box\",\n          value: content,\n          onChange: e => {\n            setContent(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 13\n        }, this), editing && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"update-btn\",\n          onClick: updateComment,\n          children: \"update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CommentFooter, {\n        updateScore: updateScore,\n        commentData: commentData,\n        setReplying: setReplying,\n        setDeleting: setDeleting,\n        setDeleteModalState: setDeleteModalState,\n        setEditing: setEditing,\n        type: \"comment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 7\n    }, this), replying && /*#__PURE__*/_jsxDEV(AddComment, {\n      buttonValue: \"reply\",\n      addComments: addReply,\n      replyingTo: commentData.username\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 9\n    }, this), commentData.replies !== [] && /*#__PURE__*/_jsxDEV(ReplyContainer, {\n      commentData: commentData.replies,\n      updateScore: updateScore,\n      addReply: addReply,\n      editComment: editComment,\n      deleteComment: deleteComment,\n      setDeleteModalState: setDeleteModalState\n    }, commentData.replies.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 9\n    }, this), deleting && /*#__PURE__*/_jsxDEV(DeleteModal, {\n      setDeleting: setDeleting,\n      deleteComment: deleteComment,\n      setDeleteModalState: setDeleteModalState\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 260,\n    columnNumber: 5\n  }, this);\n};\n\n_s3(Comment, \"9mZrKds04+d9MZiitrBvhWuSblU=\");\n\n_c5 = Comment;\n\nconst App = () => {\n  _s4();\n\n  const [comments, updateComments] = useState([]);\n  const [deleteModalState, setDeleteModalState] = useState(false);\n\n  const getData = async () => {\n    const res = await fetch(\"./data/data.json\");\n    const data = await res.json();\n    updateComments(data.comments);\n  };\n\n  useEffect(() => {\n    localStorage.getItem(\"comments\") !== null ? updateComments(JSON.parse(localStorage.getItem(\"comments\"))) : getData();\n  }, []);\n  useEffect(() => {\n    localStorage.setItem(\"comments\", JSON.stringify(comments));\n    deleteModalState ? document.body.classList.add(\"overflow--hidden\") : document.body.classList.remove(\"overflow--hidden\");\n  }, [comments, deleteModalState]); // update score\n\n  const updateScore = (score, id, type, method) => {\n    let updatedComments = [...comments];\n\n    if (type === \"comment\") {\n      updatedComments.forEach(data => {\n        if (data.id === id) {\n          data.score = score;\n          data.voted = method === \"upvote\" ? true : false;\n        }\n      });\n    } else if (type === \"reply\") {\n      updatedComments.forEach(comment => {\n        comment.replies.forEach(data => {\n          if (data.id === id) {\n            data.score = score;\n            data.voted = method === \"upvote\" ? true : false;\n          }\n        });\n      });\n    }\n\n    updateComments(updatedComments);\n  }; // add comments\n\n\n  const addComments = newComment => {\n    const updatedComments = [...comments, newComment];\n    updateComments(updatedComments);\n  }; // add replies\n\n\n  const updateReplies = (replies, id) => {\n    let updatedComments = [...comments];\n    updatedComments.forEach(data => {\n      if (data.id === id) {\n        data.replies = [...replies];\n      }\n    });\n    updateComments(updatedComments);\n  }; // edit comment\n\n\n  const editComment = (content, id, type) => {\n    let updatedComments = [...comments];\n\n    if (type === \"comment\") {\n      updatedComments.forEach(data => {\n        if (data.id === id) {\n          data.content = content;\n        }\n      });\n    } else if (type === \"reply\") {\n      updatedComments.forEach(comment => {\n        comment.replies.forEach(data => {\n          if (data.id === id) {\n            data.content = content;\n          }\n        });\n      });\n    }\n\n    updateComments(updatedComments);\n  }; // delete comment\n\n\n  let commentDelete = (id, type, parentComment) => {\n    let updatedComments = [...comments];\n    let updatedReplies = [];\n\n    if (type === \"comment\") {\n      updatedComments = updatedComments.filter(data => data.id !== id);\n    } else if (type === \"reply\") {\n      comments.forEach(comment => {\n        if (comment.id === parentComment) {\n          updatedReplies = comment.replies.filter(data => data.id !== id);\n          comment.replies = updatedReplies;\n        }\n      });\n    }\n\n    updateComments(updatedComments);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"App\",\n    children: [comments.map(comment => /*#__PURE__*/_jsxDEV(Comment, {\n      commentData: comment,\n      updateScore: updateScore,\n      updateReplies: updateReplies,\n      editComment: editComment,\n      commentDelete: commentDelete,\n      setDeleteModalState: setDeleteModalState\n    }, comment.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(AddComment, {\n      buttonValue: \"send\",\n      addComments: addComments\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 448,\n    columnNumber: 5\n  }, this);\n};\n\n_s4(App, \"Ye1rPW7xRkrmEDK02fTzOLS0H3o=\");\n\n_c6 = App;\nexport default App;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"AddComment\");\n$RefreshReg$(_c2, \"ReplyContainer\");\n$RefreshReg$(_c3, \"DeleteModal\");\n$RefreshReg$(_c4, \"Reply\");\n$RefreshReg$(_c5, \"Comment\");\n$RefreshReg$(_c6, \"App\");","map":{"version":3,"sources":["D:/University/interactive-comments-section-master/src/App.js"],"names":["useState","useEffect","AddComment","buttonValue","addComments","replyingTo","replyingToUser","comment","setComment","clickHandler","newComment","id","Math","floor","random","content","replace","createdAt","Date","score","username","currentUser","replies","e","target","value","ReplyContainer","commentData","updateScore","addReply","editComment","deleteComment","setDeleteModalState","map","data","DeleteModal","setDeleting","cancelDelete","deleteBtnClick","Reply","addNewReply","replying","setReplying","editing","setEditing","setContent","deleting","newReply","commentContent","text","trim","split","firstWord","shift","join","updateComment","deleteReply","undefined","reply","Comment","updateReplies","commentDelete","type","finalType","finalId","App","comments","updateComments","deleteModalState","getData","res","fetch","json","localStorage","getItem","JSON","parse","setItem","stringify","document","body","classList","add","remove","method","updatedComments","forEach","voted","parentComment","updatedReplies","filter"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\n\nimport \"./Components/Styles/App.scss\";\n\n/* Добавление комментария */\nconst AddComment = ({ buttonValue, addComments, replyingTo }) => {\n  const replyingToUser = replyingTo ? `@${replyingTo}, ` : \"\";\n  const [comment, setComment] = useState(replyingToUser);\n\n  const clickHandler = () => {\n    if (comment === \"\" || comment === \" \") return;\n\n    const newComment = {\n      id: Math.floor(Math.random() * 100) + 5,\n      content: replyingToUser + comment.replace(replyingToUser, \"\"),\n      createdAt: new Date(),\n      score: 0,\n      username: \"juliusomo\",\n      currentUser: true,\n      replies: [],\n    };\n\n    addComments(newComment);\n    setComment(\"\");\n  };\n\n  return (\n    <div className=\"add-comment\">\n      <div className=\"profile-pic\"></div>\n      <textarea\n        className=\"comment-input\"\n        placeholder=\"Add a comment\"\n        value={comment}\n        onChange={(e) => {\n          setComment(e.target.value);\n        }}\n      />\n      <div className=\"send-btn-container\">\n        <div className=\"profile-pic\"></div>\n        <button className=\"add-btn\" onClick={clickHandler}>\n          {buttonValue}\n        </button>\n      </div>\n    </div>\n  );\n};\n\n/* Добавление комментария */\n\n/* Блок ответа */\nconst ReplyContainer = ({\n  commentData,\n  updateScore,\n  addReply,\n  editComment,\n  deleteComment,\n  setDeleteModalState,\n}) => {\n  return (\n    <div className=\"reply-container\">\n      {commentData.map((data) => (\n        <Reply\n          key={data.id}\n          commentData={data}\n          updateScore={updateScore}\n          addNewReply={addReply}\n          editComment={editComment}\n          deleteComment={deleteComment}\n          setDeleteModalState={setDeleteModalState}\n        />\n      ))}\n    </div>\n  );\n};\n/* Блок ответа */\n\n\n/* Удаление модалки */\nconst DeleteModal = ({ setDeleting, deleteComment, setDeleteModalState }) => {\n  const cancelDelete = () => {\n    setDeleting(false);\n    setDeleteModalState(false);\n  };\n\n  const deleteBtnClick = () => {\n    deleteComment();\n    setDeleteModalState(false);\n  };\n\n  return (\n    <div className=\"delete-confirmation-wrapper\">\n      <div className=\"delete-container\">\n        <div className=\"title\">Delete comment</div>\n        <div className=\"confirmation-message\">\n          Are you sure you want to delete this comment? This will remove the\n          comment and can't be undone.\n        </div>\n        <div className=\"btn-container\">\n          <button className=\"cancel-btn\" onClick={cancelDelete}>\n            No, cancel\n          </button>\n          <button className=\"delete-btn\" onClick={deleteBtnClick}>\n            Yes, delete\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n/* Удаление модалки */\n\n\n/* Ответы */\nconst Reply = ({\n  commentData,\n  updateScore,\n  addNewReply,\n  editComment,\n  deleteComment,\n  setDeleteModalState,\n}) => {\n  const [replying, setReplying] = useState(false);\n  const [editing, setEditing] = useState(false);\n  const [content, setContent] = useState(commentData.content);\n  const [deleting, setDeleting] = useState(false);\n\n  // adding reply\n  const addReply = (newReply) => {\n    addNewReply(newReply);\n    setReplying(false);\n  };\n\n  const commentContent = () => {\n    const text = commentData.content.trim().split(\" \");\n    const firstWord = text.shift().split(\",\");\n\n    return !editing ? (\n      <div className=\"comment-content\">\n        <span className=\"replyingTo\">{firstWord}</span>\n        {text.join(\" \")}\n      </div>\n    ) : (\n      <textarea\n        className=\"content-edit-box\"\n        value={content}\n        onChange={(e) => {\n          setContent(e.target.value);\n        }}\n      />\n    );\n  };\n\n  const updateComment = () => {\n    editComment(content, commentData.id, \"reply\");\n    setEditing(false);\n  };\n\n  // delete comment\n  const deleteReply = () => {\n    deleteComment(commentData.id, \"reply\");\n    setDeleting(false);\n  };\n\n  return (\n    <div\n      className={`comment-container ${\n        commentData.replies[0] !== undefined ? \"gap\" : \"\"\n      }`}\n    >\n      <div className=\"comment\">\n        <CommentVotes\n          updateScore={updateScore}\n          commentData={commentData}\n          type=\"reply\"\n        />\n        <div className=\"comment--body\">\n          <CommentHeader\n            commentData={commentData}\n            setReplying={setReplying}\n            setDeleting={setDeleting}\n            setDeleteModalState={setDeleteModalState}\n            setEditing={setEditing}\n          />\n\n          {commentContent()}\n          {editing && (\n            <button className=\"update-btn\" onClick={updateComment}>\n              update\n            </button>\n          )}\n        </div>\n        <CommentFooter\n          updateScore={updateScore}\n          commentData={commentData}\n          setReplying={setReplying}\n          setDeleting={setDeleting}\n          setDeleteModalState={setDeleteModalState}\n          setEditing={setEditing}\n          type=\"reply\"\n        />\n      </div>\n\n      {replying && (\n        <AddComment\n          buttonValue={\"reply\"}\n          addComments={addReply}\n          replyingTo={commentData.username}\n        />\n      )}\n      {commentData.replies.map((reply) => (\n        <Reply key={reply.id} commentData={reply} addReply={addReply} />\n      ))}\n\n      {deleting && (\n        <DeleteModal\n          setDeleting={setDeleting}\n          deleteComment={deleteReply}\n          setDeleteModalState={setDeleteModalState}\n        />\n      )}\n    </div>\n  );\n};\n/* Ответы */\n\n\n\nconst Comment = ({\n  commentData,\n  updateScore,\n  updateReplies,\n  editComment,\n  commentDelete,\n  setDeleteModalState,\n}) => {\n  const [replying, setReplying] = useState(false);\n  const [editing, setEditing] = useState(false);\n  const [content, setContent] = useState(commentData.content);\n  const [deleting, setDeleting] = useState(false);\n\n  const addReply = (newReply) => {\n    const replies = [...commentData.replies, newReply];\n    updateReplies(replies, commentData.id);\n    setReplying(false);\n  };\n\n  const updateComment = () => {\n    editComment(content, commentData.id, \"comment\");\n    setEditing(false);\n  };\n\n  const deleteComment = (id, type) => {\n    const finalType = type !== undefined ? type : \"comment\";\n    const finalId = id !== undefined ? id : commentData.id;\n    commentDelete(finalId, finalType, commentData.id);\n    setDeleting(false);\n  };\n\n  return (\n    <div\n      className={`comment-container ${\n        commentData.replies[0] !== undefined ? \"reply-container-gap\" : \"\"\n      }`}\n    >\n      <div className=\"comment\">\n        <CommentVotes\n          updateScore={updateScore}\n          commentData={commentData}\n          type=\"comment\"\n        />\n        <div className=\"comment--body\">\n          <CommentHeader\n            commentData={commentData}\n            replying={replying}\n            setReplying={setReplying}\n            setDeleting={setDeleting}\n            setDeleteModalState={setDeleteModalState}\n            setEditing={setEditing}\n          />\n          {!editing ? (\n            <div className=\"comment-content\">{commentData.content}</div>\n          ) : (\n            <textarea\n              className=\"content-edit-box\"\n              value={content}\n              onChange={(e) => {\n                setContent(e.target.value);\n              }}\n            />\n          )}\n          {editing && (\n            <button className=\"update-btn\" onClick={updateComment}>\n              update\n            </button>\n          )}\n        </div>\n        <CommentFooter\n          updateScore={updateScore}\n          commentData={commentData}\n          setReplying={setReplying}\n          setDeleting={setDeleting}\n          setDeleteModalState={setDeleteModalState}\n          setEditing={setEditing}\n          type=\"comment\"\n        />{\" \"}\n      </div>\n\n      {replying && (\n        <AddComment\n          buttonValue={\"reply\"}\n          addComments={addReply}\n          replyingTo={commentData.username}\n        />\n      )}\n      {commentData.replies !== [] && (\n        <ReplyContainer\n          key={commentData.replies.id}\n          commentData={commentData.replies}\n          updateScore={updateScore}\n          addReply={addReply}\n          editComment={editComment}\n          deleteComment={deleteComment}\n          setDeleteModalState={setDeleteModalState}\n        />\n      )}\n\n      {deleting && (\n        <DeleteModal\n          setDeleting={setDeleting}\n          deleteComment={deleteComment}\n          setDeleteModalState={setDeleteModalState}\n        />\n      )}\n    </div>\n  );\n};\n\n\n\n\nconst App = () => {\n  const [comments, updateComments] = useState([]);\n  const [deleteModalState, setDeleteModalState] = useState(false);\n\n  const getData = async () => {\n    const res = await fetch(\"./data/data.json\");\n    const data = await res.json();\n    updateComments(data.comments);\n  };\n\n  useEffect(() => {\n    localStorage.getItem(\"comments\") !== null\n      ? updateComments(JSON.parse(localStorage.getItem(\"comments\")))\n      : getData();\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem(\"comments\", JSON.stringify(comments));\n    deleteModalState\n      ? document.body.classList.add(\"overflow--hidden\")\n      : document.body.classList.remove(\"overflow--hidden\");\n  }, [comments, deleteModalState]);\n\n  // update score\n  const updateScore = (score, id, type, method) => {\n    let updatedComments = [...comments];\n\n    if (type === \"comment\") {\n      updatedComments.forEach((data) => {\n        if (data.id === id) {\n          data.score = score;\n          data.voted = method === \"upvote\" ? true : false;\n        }\n      });\n    } else if (type === \"reply\") {\n      updatedComments.forEach((comment) => {\n        comment.replies.forEach((data) => {\n          if (data.id === id) {\n            data.score = score;\n            data.voted = method === \"upvote\" ? true : false;\n          }\n        });\n      });\n    }\n    updateComments(updatedComments);\n  };\n\n  // add comments\n  const addComments = (newComment) => {\n    const updatedComments = [...comments, newComment];\n    updateComments(updatedComments);\n  };\n\n  // add replies\n  const updateReplies = (replies, id) => {\n    let updatedComments = [...comments];\n    updatedComments.forEach((data) => {\n      if (data.id === id) {\n        data.replies = [...replies];\n      }\n    });\n    updateComments(updatedComments);\n  };\n\n  // edit comment\n  const editComment = (content, id, type) => {\n    let updatedComments = [...comments];\n\n    if (type === \"comment\") {\n      updatedComments.forEach((data) => {\n        if (data.id === id) {\n          data.content = content;\n        }\n      });\n    } else if (type === \"reply\") {\n      updatedComments.forEach((comment) => {\n        comment.replies.forEach((data) => {\n          if (data.id === id) {\n            data.content = content;\n          }\n        });\n      });\n    }\n\n    updateComments(updatedComments);\n  };\n\n  // delete comment\n  let commentDelete = (id, type, parentComment) => {\n    let updatedComments = [...comments];\n    let updatedReplies = [];\n\n    if (type === \"comment\") {\n      updatedComments = updatedComments.filter((data) => data.id !== id);\n    } else if (type === \"reply\") {\n      comments.forEach((comment) => {\n        if (comment.id === parentComment) {\n          updatedReplies = comment.replies.filter((data) => data.id !== id);\n          comment.replies = updatedReplies;\n        }\n      });\n    }\n\n    updateComments(updatedComments);\n  };\n\n  return (\n    <main className=\"App\">\n      {comments.map((comment) => (\n        <Comment\n          key={comment.id}\n          commentData={comment}\n          updateScore={updateScore}\n          updateReplies={updateReplies}\n          editComment={editComment}\n          commentDelete={commentDelete}\n          setDeleteModalState={setDeleteModalState}\n        />\n      ))}\n      <AddComment buttonValue={\"send\"} addComments={addComments} />\n    </main>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}